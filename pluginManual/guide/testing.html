<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>9 PhantomJs tests 0.4</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/grooscript.html"><strong>2</strong><span>GrooScript</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/conversionDaemon.html"><strong>3</strong><span>Conversion daemon</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/groovyCode.html"><strong>4</strong><span>Use groovy code in gsp's</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/vertx.html"><strong>5</strong><span>Vertx</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/events.html"><strong>6</strong><span>Events</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/templating.html"><strong>7</strong><span>Create templates</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/domainClasses.html"><strong>8</strong><span>Use your domain classes</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/testing.html"><strong>9</strong><span>PhantomJs tests</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/example1.html"><strong>10</strong><span>Example using template and local events</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/example2.html"><strong>11</strong><span>Example using vert.x to make a chat</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p>Use your groovy code in your gsps thanks to GrooScript.
It converts the code to javascript and your groovy code will run in your browser.
Also use Vert.x to use events between server and gsps.
</p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/domainClasses.html">&lt;&lt; <strong>8</strong><span>Use your domain classes</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../guide/example1.html"><strong>10</strong><span>Example using template and local events</span> >></a></div>
                


                <div class="project">
                    <h1>9 PhantomJs tests - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Jorge Franco</p>

                    <p><strong>Version:</strong> 0.4</p>

                    
                </div>

                

                

<h1 id="testing">9 PhantomJs tests</h1>
The plugin adds a new testing phase, <code>phantomjs</code>, you can add new tests to <code>test/phantomjs</code>. Then you can do
functional tests using PhantomJsTest annotation, that comes with GrooScript. That annotation runs a PhantomJs test,
evaluating then code inside the method (converted jo javascript). You need <a href="http://phantomjs.org" target="blank">PhantomJs</a> installed
in your system and setup path in your Config.groovy<p class="paragraph"/><div class="code"><pre>phantomjs.path = '/anyPath/phantomjs'</pre></div><p class="paragraph"/>This tests run better extending GroovyTestCase, and will run after test application is up.
You have to put complete url of your test environment.<p class="paragraph"/><div class="code"><pre><span class="java&#45;keyword">import</span> org.grooscript.asts.PhantomJsTest<p class="paragraph"/>class PhantomJsTests <span class="java&#45;keyword">extends</span> GroovyTestCase &#123;<p class="paragraph"/>    @PhantomJsTest(url='http://localhost:8080/grooscript&#45;vertx/main/test')
    void testDefaultController() &#123;
        def title = $(<span class="java&#45;quote">"title"</span>)
        assert title&#91;0&#93;.text=='Title Test',<span class="java&#45;quote">"Title is $&#123;title&#91;0&#93;.text&#125;"</span>
    &#125;
&#125;</pre></div><p class="paragraph"/>If you use in Spock, then annotate a private method, and then use from your Spock test.
Spock <code>where:</code> clause not working.<p class="paragraph"/><strong class="bold">Grails 2.3 changed way to add tests phases and not working.</strong>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/domainClasses.html">&lt;&lt; <strong>8</strong><span>Use your domain classes</span></a></div>
                
                    <div class="toc-item next-right"><a href="../guide/example1.html"><strong>10</strong><span>Example using template and local events</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Tags</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Tags/code.html">code</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/initVertx.html">initVertx</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/model.html">model</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/onEvent.html">onEvent</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/onServerEvent.html">onServerEvent</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/onVertxStarted.html">onVertxStarted</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/reloadPage.html">reloadPage</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/remoteModel.html">remoteModel</a>
                            </div>
                            
                            <div class="menu-item"><a href="../ref/Tags/template.html">template</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
