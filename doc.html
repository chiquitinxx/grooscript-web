<!DOCTYPE html>
<html lang="en">
  <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="description" content="Converts Groovy code to JavaScript"/>
      <meta name="keywords" content="groovy, scripting language, javascript, groovy to javascript, framework"/>
      <meta name="author" content="Jorge Franco">
      <link rel="shortcut icon" href="img/favicon.png">

    <title>Grooscript</title>

    <!-- Bootstrap core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="css/grooscript.css" rel="stylesheet">
    <link href="css/shCoreDefault.css" rel="stylesheet">

      <script src="js/shCore.js"></script>
      <script src="js/shBrushJScript.js"></script>
      <script src="js/shBrushGroovy.js"></script>
      <script src="js/shAutoloader.js"></script>
      <script src="js/shCore.min.js"></script>

      <script>
          SyntaxHighlighter.defaults['light'] = true;
          SyntaxHighlighter.all();
      </script>

    <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div id="headbar" class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="index.html">grooscript</a>
        </div>
        <div id="socialIcons" class="collapse navbar-collapse">
          <ul class="nav navbar-nav navbar-right">
            <li><a data-placement="bottom" title="Send Email" href="mailto:grooscript@gmail.com"><img src="img/gmail-48.png"/></a></li>
            <li><a data-placement="bottom" title="Twitter" href="http://twitter.com/grooscript"><img src="img/twitter-48.png"/></a></li>
            <li><a data-placement="bottom" title="Blog" href="http://grooscript.wordpress.com"><img src="img/wordpress-48.png"/></a></li>
            <li><a data-placement="bottom" title="Github" href="http://github.com/chiquitinxx/grooscript"><img src="img/github-48.png"/></a></li>
          </ul>
        </div><!--/.nav-collapse -->
      </div>
    </div>

    <div class="container">
    <div class="row-fluid topMessage">

    <ul id="myTab" class="nav nav-pills">
        <li class="active"><a href="#started" data-toggle="tab">Get Started</a></li>
        <li><a href="#features" data-toggle="tab">Features</a></li>
        <li><a href="#support" data-toggle="tab">Groovy Support</a></li>
        <!--<li><a href="#crud" data-toggle="tab">CRUD Example</a></li>-->
    </ul>

    <div id="myTabContent" class="tab-content span10" >
    <div class="tab-pane fade in active" id="started">
        <p>Be aware javascript isn't Java or Groovy, lot of differences between them. The main idea of this project is use
            Groovy strength in the browser, not create a full conversion. I'm looking for use groovy code and tools in the client,
            wanna use Spock tests in the server and in the browser.</p>

        <p>So, for converting your groovy code, you need grooscript.jar. You can get from mavenCentral
            (org.grooscript:grooscript:0.5) in your project's dependencies. Remember need grooscript.js, inside the jar or get
            <a href='js/grooscript.js'>here</a>.</p>
        <p>Let's see code for conversion:</p>
        <pre class='brush:groovy;'>
            import org.grooscript.GrooScript

            //Convert a fragment code
            String jsResult = GrooScript.convert("println 'Hello!'")

            //Convert some file or folder, generate .js files with same name.
            GrooScript.convert('path/to/file/or/folder','path/to/destination/folder')

            //And that's all, so easy make conversions
        </pre>
        <p>If you convert a file with dependencies to other files, all will be converted to target file.</p>
    </div>
    <div class="tab-pane fade" id="features">
        <p><h4>Conversion Daemon</h4> You can activate a daemon to convert your Groovy files when modify them.</p>
        <pre class='brush:groovy;'>
            import org.grooscript.GrooScript

            //You can detect changes in files or files in folders. Sources can be a List of String or a String
            def sources = ['src/groovy/presenters', 'myFile.groovy']
            //Set destination folder for converted files
            def destination = 'js/grooscript'
            //You can set conversion options, see below for options supported. Optional.
            def options = [classpath:'src/groovy', convertDependencies:false]

            //The demon starts and converts all the files at start.
            //Then listen, and each time any of the files changes, generate the new javascript file automatically.
            //Read all files each second.
            //Fourth parameter is an optional closure that will executes each time all read and converted. Optional.
            //The closure receives a list with absolutePath of files modified
            //Last parameter set recursion option, by default is false. If set to true, also folders will be converted.
            def daemon = GrooScript.startConversionDaemon(sources, destination, options, { list -> list.each { println 'Converted file -> '+it}}, true)

            //For stop the daemon
            daemon.stop()
        </pre>
        <p><h4>PhantomJsTest</h4> You can annotate your methods to do a <a href="http://phantomjs.org">PhantomJs</a> test.
        This AST convert your method code to a script that launch a PhantomJs test and check results.
        The code inside the method is converted to javascript and executed in the phantomJs test, included asserts.
        It needs your phantomJs path. Uses grooscript.js and kimbo.min.js (faster jquery), that try to find inside the jar.</p>
        <p>After all code is executed, you can capture image with <i>capture</i> option<p>
        <p>You can start the test some seconds after the page loaded with <i>waitSeconds</i> option<p>
        <p>You can get extra info with <i>info = true</i> option<p>
        <pre class='brush:groovy;'>
            //You must define this, only if not PHANTOMJS_HOME defined in your system
            System.setProperty('PHANTOMJS_HOME','/Applications/phantomjs')

            //This only needed if fails in get js files from the jar
            //System.setProperty('JS_LIBRARIES_PATH','../../../src/main/resources/META-INF/resources')

            @PhantomJsTest(url='http://www.grails.org', capture = 'grails.png', waitSeconds = 2)
            void testCountLinks() {
                assert $('a').size() > 50,"Number of links in page is &#36;{$('a').size()}"
                def title = $("title")
                assert title[0].text=='Grails - The search is over.',"Title is &#36;{title[0].text}"
                def links = $('a')
                links.each {
                    println it
                }
            }

            testCountLinks()
        </pre>
        <p><h4>GsNative</h4> You can annotate your methods with javascript code with @GsNative.</p>
        <pre class='brush:groovy;'>
        //You add javascript code inside function like a comment between /* and */
        import org.grooscript.asts.GsNative

        class Numbers {

            def getFour() {
                4
            }

            /* A comment */

            @GsNative
            def getFive() {/*
                //Comment
                return 5;
            */}

            /* Other comment */

            def getSix() {
                6
            }
        }

        numbers = new Numbers()

        //Only works in javascript, fails in groovy
        assert numbers.getFive() == 5
        </pre>
        <p><h4>GsNotConvert</h4> You can annotate your classes and methods with @GsNotConvert and never will be converted to .js files.</p>
        <pre class='brush:groovy;'>
        import org.grooscript.asts.GsNotConvert

        @GsNotConvert
        class ClassNotConvert {
            def a
        }

        class A {
            @GsNotConvert
            def methodNotConvert() {
                println 'No!'
            }

            def hello() {
                println 'Hello!'
            }
        }
        </pre>
        <p><h4>Conversion options</h4></p>
        <ul>
            <li><b>classPath</b> (default null): set classPath for conversions. GrooScript compiles your code before convert it. Maybe some times you want to define your own classpath as src/groovy. Then class needed for compilation can be found. You can pass a String or a List.</li>
            <li><b>convertDependencies</b> (default false): setting to true will convert dependencies (imports).</li>
            <li><b>customization</b> (default null): customizer builder closure. <a href="http://docs.codehaus.org/display/GROOVY/Advanced+compiler+configuration">More info</a></li>
            <li><b>mainContextScope</b> (default null): add name of function or variables that are availables in main scope. Then, grooscript will not try get them from incorrect scope.</li>
            <li><b>initialText</b> (default null): add any text at begin of each converted js file.</li>
            <li><b>finalText</b> (default null): add any text at the end of each converted js file.</li>
            <li><b>recursive</b> (default false): if set to true, folder will be converted also.</li>
        </ul>
        <pre class='brush:groovy;'>
            //Set a conversion property
            GrooScript.setConversionProperty('convertDependencies', false)
            GrooScript.setConversionProperty('customization', {
                ast(CompileStatic)
            })
        </pre>
        <p><h4>Javascript Options</h4></p>
        <ul>
            <li>In javascript code you can set gSconsoleOutput to false and then you will not see println's in browser console.</li>
            <li>Set gSconsoleInfo to true and then you see debug info in your browser console.</li>
            <li>By default, in grooscript.js gSconsoleOutput is true and gSconsoleInfo is false.</li>
        </ul>
        <pre class='brush:javascript;'>
            gSconsoleOutput = false;
            gSconsoleInfo = true;
        </pre>
        <p><h4>Conversion Options</h4></p>
        <ul>
            <li>You can get some info in console when converting.</li>
        </ul>
        <pre class='brush:groovy;'>
            GrooScript.debug = true
        </pre>
        <p><h4>Join files</h4></p>
        <p>You can join all js files in a directory in one file.</p>
        <pre class='brush:groovy;'>
            GrooScript.joinFiles(SOURCE_DIR, DESTINATION_FILE)
        </pre>
    </div>
    <div class="tab-pane fade" id="support">
    <p>Working in groovy magic in the browser, not a full Groovy / Java conversion.</p>
    <p>If you are missing some Groovy magic, don't hesitate contact me.</p>
    <table style="width: 240px" class="table">
        <thead>
        <tr>
            <th>Color</th>
            <th>Description</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td class="badSupport"></td>
            <td>Bad support.</td>
        </tr>
        <tr>
            <td class="littleSupport"></td>
            <td>Little support.</td>
        </tr>
        <tr>
            <td class="goodSupport"></td>
            <td>Good support.</td>
        </tr>
        </tbody>
    </table>

    <table class="table">
    <thead>
    <tr>
        <th>Group</th>
        <th>Feature</th>
        <th>State</th>
        <th>Comment</th>
    </tr>
    </thead>
    <tbody>
    <tr>
        <td>Java</td>
        <td>Interfaces</td>
        <td class="goodSupport"></td>
        <td>Are ignored in conversion, not needed in javascript code.</td>
    </tr>
    <tr>
        <td>Java</td>
        <td>Types</td>
        <td class="badSupport"></td>
        <td>Support only in some basic java types as String, ArrayList, HashMap, ...</td>
    </tr>
    <tr>
        <td>Java</td>
        <td>Objects</td>
        <td class="littleSupport"></td>
        <td>Can't define two functions with same name. Constructors can't have same number of parameters.</td>
    </tr>
    <tr>
        <td>Java</td>
        <td>Inheritance</td>
        <td class="littleSupport"></td>
        <td>Can only extend your own classes. Can call super only in constructors. Overloading functions of parents.</td>
    </tr>
    <tr>
        <td>Java</td>
        <td>Packages</td>
        <td class="badSupport"></td>
        <td>Ignoring package names. Only can read packages in names of your own classes with a conversion option. Used for little instanceof support.</td>
    </tr>
    <tr>
        <td>Java</td>
        <td>Try/Catch</td>
        <td class="littleSupport"></td>
        <td>Little support, as javascript does.</td>
    </tr>
    <tr>
        <td>Objects</td>
        <td>Compare</td>
        <td class="littleSupport"></td>
        <td>Function equals used in some cases.</td>
    </tr>
    <tr>
        <td>Objects</td>
        <td>Size</td>
        <td class="goodSupport"></td>
        <td>size() function created in some objects.</td>
    </tr>
    <tr>
        <td>Objects</td>
        <td>GString access</td>
        <td class="goodSupport"></td>
        <td>Can access properties and methods with Gstrings.</td>
    </tr>
    <tr>
        <td>Objects</td>
        <td>Default constructor</td>
        <td class="goodSupport"></td>
        <td>Objects, without a 1 parameter constructor, have a default constructor with a map parameter.</td>
    </tr>
    <tr>
        <td>Objects</td>
        <td>* operator</td>
        <td class="goodSupport"></td>
        <td>Available.</td>
    </tr>
    <tr>
        <td>Strings</td>
        <td>GStrings</td>
        <td class="goodSupport"></td>
        <td>Supporting ''', "$ { }" and some functions.</td>
    </tr>
    <tr>
        <td>Regular Expressions</td>
        <td></td>
        <td class="goodSupport"></td>
        <td>Support of common functions and operators.</td>
    </tr>
    <tr>
        <td>Collections</td>
        <td>Groovy Lists</td>
        <td class="goodSupport"></td>
        <td>Supporting some functions.</td>
    </tr>
    <tr>
        <td>Collections</td>
        <td>Groovy Ranges</td>
        <td class="goodSupport"></td>
        <td>Converted to lists. &lt supported. Not negative numbers.</td>
    </tr>
    <tr>
        <td>Collections</td>
        <td>Groovy Maps</td>
        <td class="goodSupport"></td>
        <td>Supporting some functions.</td>
    </tr>
    <tr>
        <td>Keywords</td>
        <td>assert</td>
        <td class="goodSupport"></td>
        <td>Using 2 parameters version in conversions.</td>
    </tr>
    <tr>
        <td>Keywords</td>
        <td>use</td>
        <td class="goodSupport"></td>
        <td>With categories.</td>
    </tr>
    <tr>
        <td>Groovy</td>
        <td>Truth</td>
        <td class="goodSupport"></td>
        <td>Empty objects as lists return false.</td>
    </tr>
    <tr>
        <td>Groovy</td>
        <td>Numbers as objects</td>
        <td class="littleSupport"></td>
        <td>Support times, upTo and step.</td>
    </tr>
    <tr>
        <td>Groovy</td>
        <td>Optional parameters</td>
        <td class="goodSupport"></td>
        <td>Support optional parameters in functions.</td>
    </tr>
    <tr>
        <td>Groovy</td>
        <td>Expando</td>
        <td class="goodSupport"></td>
        <td>Yes. JavaScript object is similar to Expando object.</td>
    </tr>
    <tr>
        <td>Groovy</td>
        <td>Pointer methods</td>
        <td class="goodSupport"></td>
        <td>Yes.</td>
    </tr>
    <tr>
        <td>Groovy</td>
        <td>Multiple assignment</td>
        <td class="goodSupport"></td>
        <td>Yes.</td>
    </tr>
    <tr>
        <td>Groovy</td>
        <td>Categories</td>
        <td class="goodSupport"></td>
        <td>Yes.</td>
    </tr>
    <tr>
        <td>Groovy</td>
        <td>Mixing</td>
        <td class="goodSupport"></td>
        <td>Yes.</td>
    </tr>
    <tr>
        <td>Groovy</td>
        <td>Control Structures</td>
        <td class="littleSupport"></td>
        <td>Basic support, can't assing variables inside 'switch' statement. Haven't tried 'break', 'continue', all 'for' options.</td>
    </tr>
    <tr>
        <td>Closures</td>
        <td>Basic</td>
        <td class="goodSupport"></td>
        <td>Yes, cool :)</td>
    </tr>
    <tr>
        <td>Closures</td>
        <td>Object Methods</td>
        <td class="badSupport"></td>
        <td>Not atm.</td>
    </tr>
    <tr>
        <td>Closures</td>
        <td>Extras</td>
        <td class="littleSupport"></td>
        <td>Just added a little support to delegate in closures.</td>
    </tr>
    <tr>
        <td>Operators</td>
        <td>Basic</td>
        <td class="littleSupport"></td>
        <td>Support ?:, basic java operators + - * /. You can create plus, minus and multiply functions and will be used.</td>
    </tr>
    <tr>
        <td>Operators</td>
        <td>Special</td>
        <td class="littleSupport"></td>
        <td>Support &lt&lt on lists and maps, can override leftShift method. Support &lt=&gt.</td>
    </tr>
    <tr>
        <td>GroovyBeans</td>
        <td>Basic</td>
        <td class="goodSupport"></td>
        <td>Support getter and setters as groovy does.</td>
    </tr>
    <tr>
        <td>GroovyBeans</td>
        <td>Advanced</td>
        <td class="goodSupport"></td>
        <td>Supporting getProperty, setProperty, methodMissing. Added invokeMethod but don't intercept calls.</td>
    </tr>
    <tr>
        <td>MOP</td>
        <td>Basic</td>
        <td class="goodSupport"></td>
        <td>Can add/modify properties and methods in execution time. Some problems with primitive types as Integer or String.
            Can use getProperties() and getMethods() to get names. Can add properties/methods to classes.</td>
    </tr>
    <tr>
        <td>MOP</td>
        <td>Advanced</td>
        <td class="badSupport"></td>
        <td>Just working on dynamic features needed, never a full groovy metaclass, metainfo, ... support. Same for Java class.</td>
    </tr>
    <tr>
        <td>AST</td>
        <td></td>
        <td class="badSupport"></td>
        <td>Ignoring any annotation except GrooScript @GsNative and @GsNotConvert. Also support @Mixin and @Category. Annotations in semantic phase, will be converted, is same phase that GrooScript use.</td>
    </tr>
    </tbody>
    </table>
    </div>
    </div>
    </div>

    </div>
    </div>


      <p class="text-center">@GrooScript 2014</p>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

      <script>
          $('#socialIcons a').hover(function(e) {
              $(e.target).tooltip('show');
          }, function(e) {
              $(e.target).tooltip('hide');
          });
      </script>
  </body>

    <script>
        //Google Analytics info
        var _gaq = _gaq || [];
        _gaq.push(['_setAccount', 'UA-37511810-1']);
        _gaq.push(['_trackPageview']);

        (function() {
            var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
            ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
            var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
        })();
    </script></html>
